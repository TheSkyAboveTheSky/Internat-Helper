<h2 class="title">Users Table</h2>
<div class="container">
  <div class="search-div">
    <button mat-raised-button
      (click)="onCreate()">
      <mat-icon>add</mat-icon>Create
    </button>
    <mat-form-field class="search-form-field">
      <input matInput [(ngModel)]="keySearch" placeholder="Search" autocomplete="off" />
      <button mat-button matSuffix mat-icon-button aria-label="Clear" *ngIf="keySearch">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </div>
  <table mat-table
    [dataSource]="DataSource"
    class="table mat-elevation-z8"
    matSort
        >
    <ng-container matColumnDef="icon">
      <th mat-header-cell
        style="color:aliceblue"
        class="table-dark"
        *matHeaderCellDef>#</th>
      <td mat-cell
        *matCellDef="let element;let i =index;"> {{i+1}} </td>
    </ng-container>
    <ng-container matColumnDef="username">
      <th mat-header-cell
        class="table-dark"
        style="color:aliceblue"
        mat-sort-header
        *matHeaderCellDef>Username</th>
      <td mat-cell
        *matCellDef="let element;let i =index;"> {{element.username}} </td>
    </ng-container>
    <ng-container matColumnDef="age">
      <th mat-header-cell
        class="table-dark"
        style="color:aliceblue"
        mat-sort-header
        *matHeaderCellDef>Age</th>
      <td mat-cell
        *matCellDef="let element;let i =index;"> {{ calculateAge(element.date) }} </td>
    </ng-container>
    <ng-container matColumnDef="email">
      <th mat-header-cell
        class="table-dark"
        style="color:aliceblue"
        *matHeaderCellDef>Email</th>
      <td mat-cell
        *matCellDef="let element;let i =index;"> {{element.email}} </td>
    </ng-container>
    <ng-container matColumnDef="role">
      <th mat-header-cell
        class="table-dark"
        style="color:aliceblue"
        *matHeaderCellDef>Role</th>
      <td mat-cell
        *matCellDef="let element;let i =index;"> <span class="badge badge-primary">{{element.roles[0].name}}</span> </td>
    </ng-container>
    <ng-container matColumnDef="gender">
      <th mat-header-cell
        class="table-dark"
        style="color:aliceblue"
        *matHeaderCellDef>Gender</th>
      <td mat-cell
        *matCellDef="let element;let i =index;"> 
        <span class="badge badge-danger" *ngIf="element.Gender == 'male'">{{element.Gender}}</span> 
        <span class="badge badge-success" *ngIf="element.Gender == 'female'">{{element.Gender}}</span> 
      </td>
    </ng-container>
    <ng-container matColumnDef="poste">
      <th mat-header-cell
        class="table-dark"
        style="color:aliceblue"
        *matHeaderCellDef>Poste</th>
      <td mat-cell
        *matCellDef="let element;let i =index;"> <span class="badge badge-primary">{{element.poste}}</span> </td>
    </ng-container>
    
    <ng-container matColumnDef="action">
      <th mat-header-cell
        class="table-dark"
        style="color:aliceblue"
        *matHeaderCellDef> Actions </th>
      <td mat-cell
        *matCellDef="let element">
        <a mat-icon-button
          class="btn"
          style="color: orange;">
          <mat-icon>remove_red_eye</mat-icon>
        </a>
        <a (click)="onEdit(element)"
          mat-icon-button
          class="btn"
          style="color: green">
          <mat-icon>update</mat-icon>
        </a>
        <a mat-icon-button
          class="btn"
          style="color: red;">
          <mat-icon>delete</mat-icon>
        </a>
      </td>
    </ng-container>
    <tr mat-header-row
      *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row
      *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <mat-paginator #paginator
    [pageSize]="10"
    [pageSizeOptions]="[1,2,3,5,10]"
    aria-label="Select page"
    showFirstLastButtons></mat-paginator>
</div>